<html>
<head>
 <style>
 body { margin: 0; }
 canvas { width: 100%; height: 100% }
 </style>
</head>
<body>
 <script src="js/three.js"></script>
 <script src="js/OrbitControls.js"></script>

 <script>
 function rotateHouse(A)
 {
 	geometry = modelHouse.geometry;

 	var mRotate = new THREE.Matrix4();
 	var cA = Math.cos(A);
 	var sA = Math.sin(A);
	mRotate.set( cA, 0, -sA, 0,
				       0, 1, 0, 0,
	        	   sA, 0, cA, 0,
	        	   0, 0, 0, 1);
 	//alert(gerHouse);
 	if(geoHouse != undefined)
 	{
 		geometry.applyMatrix(mRotate);

 	}
 }



 // Setup a new scene
 var scene = new THREE.Scene();


 // Setup the camera
 var camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
 camera.position.z = 5;
 camera.position.y = 3;
 //camera.rotation.


 // Setup the renderer
 var renderer = new THREE.WebGLRenderer({alpha:true});
 renderer.setSize(window.innerWidth, window.innerHeight);
 document.body.appendChild(renderer.domElement);

controls = new THREE.OrbitControls(camera, renderer.domElement);
controls.enableKeys = (false);

 // Add the lights
 var ambientLight =  new THREE.AmbientLight( 0xffffff, 0.5 );
 scene.add(ambientLight);

  var light = new THREE.PointLight( 0xFFFFFFF );
  light.position.set( -15, 10, 15 );
  scene.add( light );

  var gridXZ = new THREE.GridHelper(10, 30, 0x000000, 0x000000);
  scene.add(gridXZ);
 // Models
 var modelHouse;
 var geoHouse;
 
 // Load the JSON files and provide callback functions (modelToScene
 var loader = new THREE.JSONLoader();
 loader.load( "./rabbit.json", addModelToScene );

 function addModelToScene( geometry, materials ) {
   var material = new THREE.MeshFaceMaterial(materials);
   modelHouse = new THREE.Mesh( geometry, material );
  

 	camera.lookAt(geometry.vertices[0]);
   modelHouse.scale.set(0.5,0.5,0.5);
   scene.add( modelHouse );
 }

 function geoDisplay()
 {
 	if(geoHouse !== undefined)
 	{
 		for (var i = 0; i < geoHouse.vertices.length; i++)
		{
		    var v = geoHouse.vertices[i];
		    log.console(v);
		}
 	}	
 }

 // Render loop to rotate our sphere by a little bit each frame
 var render = function () {
   requestAnimationFrame(render);
   
	
   renderer.render(scene, camera);
 };

function onKeyDown(e){
     
    switch(e.keyCode){
         
        case 37:  // если нажата клавиша влево
            rotateHouse(-0.1);
            break;
        case 38:   // если нажата клавиша вверх
            break;
        case 39:   // если нажата клавиша вправо
        	rotateHouse(0.1);
            break;
        case 40:   // если нажата клавиша вниз
            break;
    }
}
 
addEventListener("keydown", onKeyDown);

 render();
 </script>
</body>
</html>